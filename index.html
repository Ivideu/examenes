<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Mastery - Unidades 1-7</title>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #4834d4; --accent: #eb4d4b; --bg: #f9f9f9; --text: #2d3436; }
        body { font-family: 'Quicksand', sans-serif; background: var(--bg); color: var(--text); padding: 20px; display: flex; justify-content: center; }
        .quiz-card { background: white; width: 100%; max-width: 800px; padding: 40px; border-radius: 25px; box-shadow: 0 15px 35px rgba(0,0,0,0.1); }
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .progress-container { height: 12px; background: #dfe6e9; border-radius: 10px; margin: 20px 0; }
        #bar { height: 100%; background: linear-gradient(90deg, #686de0, #4834d4); border-radius: 10px; width: 0%; transition: 0.5s; }
        .type-badge { display: inline-block; padding: 5px 15px; background: #686de0; color: white; border-radius: 15px; font-size: 0.8rem; margin-bottom: 10px; }
        .question-box { font-size: 1.6rem; font-weight: 700; margin-bottom: 25px; color: #130f40; }
        
        /* Estilos para inputs */
        input { width: 100%; padding: 15px; border: 3px solid #f0f0f0; border-radius: 15px; font-size: 1.1rem; box-sizing: border-box; transition: 0.3s; }
        input:focus { border-color: var(--primary); outline: none; }
        
        /* Estilos para opciones m√∫ltiples */
        .options-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px; }
        .option-btn { padding: 15px; border: 2px solid #686de0; background: white; border-radius: 15px; cursor: pointer; font-weight: 600; transition: 0.2s; }
        .option-btn:hover { background: #686de0; color: white; }

        .btn-check { background: var(--primary); color: white; border: none; width: 100%; padding: 18px; border-radius: 15px; font-size: 1.1rem; font-weight: 700; cursor: pointer; margin-top: 20px; }
        .feedback { margin-top: 20px; font-weight: 700; min-height: 1.2em; border-radius: 10px; padding: 10px; display: none; }
        .correct { background: #badc58; color: #2d3436; }
        .wrong { background: #ff7979; color: white; }
    </style>
</head>
<body>

<div class="quiz-card">
    <div class="header">
        <div id="stats">Aciertos: 0</div>
        <div id="timer">Lecci√≥n 1-7</div>
    </div>
    <div class="progress-container"><div id="bar"></div></div>
    
    <div id="quiz-content">
        </div>
    
    <div id="feedback-msg" class="feedback"></div>
</div>

<script>
// Datos enriquecidos
const data = {
    verbs: [
        { inf: "break", pas: "broke", part: "broken", esp: "romper" },
        { inf: "bring", pas: "brought", part: "brought", esp: "traer" },
        { inf: "buy", pas: "bought", part: "bought", esp: "comprar" },
        { inf: "choose", pas: "chose", part: "chosen", esp: "escoger" },
        { inf: "eat", pas: "ate", part: "eaten", esp: "comer" },
        { inf: "fly", pas: "flew", part: "flown", esp: "volar" },
        { inf: "forget", pas: "forgot", part: "forgotten", esp: "olvidar" },
        { inf: "freeze", pas: "froze", part: "frozen", esp: "congelar" },
        { inf: "give", pas: "gave", part: "given", esp: "dar" },
        { inf: "steal", pas: "stole", part: "stolen", esp: "robar" }
    ],
    vocab: [
        { eng: "neighbourhood", esp: "barrio" },
        { eng: "petrol station", esp: "gasolinera" },
        { eng: "conquer", esp: "conquistar" },
        { eng: "jewellery", esp: "joyas" },
        { eng: "carpet", esp: "alfombra" },
        { eng: "cupboard", esp: "armario" },
        { eng: "waterfall", esp: "cascada" },
        { eng: "desert", esp: "desierto" },
        { eng: "scuba diving", esp: "buceo" },
        { eng: "boring", esp: "aburrido" }
    ]
};

let score = 0;
let currentStep = 0;
const totalQuestions = 15;
let currentQuestion = {};

function nextQuestion() {
    if(currentStep >= totalQuestions) {
        showFinalScore();
        return;
    }
    
    currentStep++;
    document.getElementById('bar').style.width = (currentStep/totalQuestions)*100 + "%";
    document.getElementById('feedback-msg').style.display = 'none';
    
    const type = Math.floor(Math.random() * 4); // 4 tipos de preguntas
    const content = document.getElementById('quiz-content');
    
    if (type === 0) { // Escribir verbo completo
        currentQuestion = data.verbs[Math.floor(Math.random()*data.verbs.length)];
        content.innerHTML = `
            <div class="type-badge">Verbos Irregulares (Escribir)</div>
            <div class="question-box">Traduce y completa las formas de: "${currentQuestion.esp}"</div>
            <input type="text" id="v1" placeholder="Infinitivo (ej: go)">
            <input type="text" id="v2" placeholder="Pasado (ej: went)" style="margin-top:10px">
            <input type="text" id="v3" placeholder="Participio (ej: gone)" style="margin-top:10px">
            <button class="btn-check" onclick="checkVerbs()">Enviar Respuesta</button>
        `;
    } else if (type === 1) { // Vocabulario ESP -> ENG
        currentQuestion = data.vocab[Math.floor(Math.random()*data.vocab.length)];
        content.innerHTML = `
            <div class="type-badge">Vocabulario (Traducci√≥n)</div>
            <div class="question-box">¬øC√≥mo se dice "${currentQuestion.esp}" en ingl√©s?</div>
            <input type="text" id="ans" placeholder="Tu respuesta...">
            <button class="btn-check" onclick="checkVocabEng()">Comprobar</button>
        `;
    } else if (type === 2) { // Elecci√≥n m√∫ltiple
        currentQuestion = data.vocab[Math.floor(Math.random()*data.vocab.length)];
        let options = [currentQuestion.esp];
        while(options.length < 4) {
            let r = data.vocab[Math.floor(Math.random()*data.vocab.length)].esp;
            if(!options.includes(r)) options.push(r);
        }
        options.sort(() => Math.random() - 0.5);

        content.innerHTML = `
            <div class="type-badge">Opci√≥n M√∫ltiple</div>
            <div class="question-box">¬øQu√© significa "${currentQuestion.eng}"?</div>
            <div class="options-grid">
                ${options.map(o => `<button class="option-btn" onclick="checkMultiple('${o}', '${currentQuestion.esp}')">${o}</button>`).join('')}
            </div>
        `;
    } else { // Vocabulario ENG -> ESP
        currentQuestion = data.vocab[Math.floor(Math.random()*data.vocab.length)];
        content.innerHTML = `
            <div class="type-badge">Traduce al Espa√±ol</div>
            <div class="question-box">¬øQu√© significa "${currentQuestion.eng}"?</div>
            <input type="text" id="ans" placeholder="Traducci√≥n en espa√±ol...">
            <button class="btn-check" onclick="checkVocabEsp()">Comprobar</button>
        `;
    }
}

// L√≥gica de comprobaci√≥n
function showFeedback(isCorrect, msg) {
    const f = document.getElementById('feedback-msg');
    f.style.display = 'block';
    f.innerText = isCorrect ? "‚úÖ ¬°Correcto! " + msg : "‚ùå " + msg;
    f.className = "feedback " + (isCorrect ? "correct" : "wrong");
    if(isCorrect) {
        score++;
        document.getElementById('stats').innerText = `Aciertos: ${score}`;
    }
    setTimeout(nextQuestion, 2000);
}

function checkVerbs() {
    const i = document.getElementById('v1').value.trim().toLowerCase();
    const p = document.getElementById('v2').value.trim().toLowerCase();
    const pa = document.getElementById('v3').value.trim().toLowerCase();
    const isOk = (i === currentQuestion.inf && p === currentQuestion.pas && pa === currentQuestion.part);
    showFeedback(isOk, `Era: ${currentQuestion.inf} - ${currentQuestion.pas} - ${currentQuestion.part}`);
}

function checkVocabEng() {
    const a = document.getElementById('ans').value.trim().toLowerCase();
    showFeedback(a === currentQuestion.eng.toLowerCase(), `La palabra es: ${currentQuestion.eng}`);
}

function checkVocabEsp() {
    const a = document.getElementById('ans').value.trim().toLowerCase();
    showFeedback(a === currentQuestion.esp.toLowerCase(), `Significa: ${currentQuestion.esp}`);
}

function checkMultiple(selected, correct) {
    showFeedback(selected === correct, `La respuesta era: ${correct}`);
}

function showFinalScore() {
    document.getElementById('quiz-content').innerHTML = `
        <div style="text-align:center">
            <h1>üèÜ ¬°Fin del Examen!</h1>
            <p style="font-size:1.5rem">Has conseguido <strong>${score}</strong> puntos de ${totalQuestions}.</p>
            <button class="btn-check" onclick="location.reload()">¬°Jugar otra vez!</button>
        </div>
    `;
}

nextQuestion();
</script>
</body>
</html>
