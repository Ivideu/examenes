<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Examen Pro: 1 a 1</title>
    <style>
        :root {
            --primary: #6c5ce7;
            --success: #27ae60;
            --error: #e74c3c;
            --bg: #f0f3f7;
        }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .container { width: 90%; max-width: 600px; background: white; padding: 30px; border-radius: 20px; box-shadow: 0 15px 35px rgba(0,0,0,0.1); position: relative; }
        
        /* Marcador Superior */
        .stats-bar { display: flex; justify-content: space-between; margin-bottom: 20px; font-weight: bold; color: #636e72; border-bottom: 2px solid #eee; padding-bottom: 10px; }
        .score-pill { background: var(--primary); color: white; padding: 2px 12px; border-radius: 20px; }

        .question-content { min-height: 200px; }
        h2 { color: var(--primary); margin-top: 0; }
        
        .options label { display: block; margin: 10px 0; padding: 15px; background: #f8f9fa; border: 2px solid #eee; border-radius: 12px; cursor: pointer; transition: 0.2s; }
        .options input { margin-right: 10px; }
        
        input[type="text"] { width: 100%; padding: 15px; border: 2px solid #ddd; border-radius: 12px; font-size: 18px; box-sizing: border-box; }

        .btn-main { width: 100%; padding: 15px; border: none; border-radius: 12px; color: white; font-weight: bold; cursor: pointer; font-size: 16px; margin-top: 20px; transition: 0.3s; }
        .btn-next { background: var(--primary); }
        .btn-restart { background: #34495e; }

        /* Feedback */
        #feedbackArea { margin-top: 20px; padding: 15px; border-radius: 12px; display: none; text-align: center; font-weight: bold; }
        .fb-correct { background: #dff9fb; color: var(--success); border: 1px solid var(--success); }
        .fb-incorrect { background: #ffeaa7; color: #d35400; border: 1px solid var(--error); }

        .hidden { display: none; }
    </style>
</head>
<body>

<div class="container">
    <div id="startScreen" class="text-center">
        <h1 style="text-align: center;">Examen de Verbos</h1>
        <p style="text-align: center;">20 preguntas aleatorias. Una por página.</p>
        <button class="btn-main btn-next" onclick="iniciarExamen()">EMPEZAR EXAMEN</button>
    </div>

    <div id="quizScreen" class="hidden">
        <div class="stats-bar">
            <span>Pregunta: <span id="currentNum">1</span>/20</span>
            <span>Aciertos: <span id="liveScore" class="score-pill">0</span></span>
        </div>

        <div id="questionArea" class="question-content">
            </div>

        <div id="feedbackArea"></div>

        <button id="actionBtn" class="btn-main btn-next" onclick="validarRespuesta()">COMPROBAR</button>
    </div>

    <div id="resultScreen" class="hidden" style="text-align: center;">
        <h2>¡Examen Completado!</h2>
        <div style="font-size: 48px; margin: 20px 0;" id="finalNote">0.0</div>
        <p id="finalDetails"></p>
        <button class="btn-main btn-restart" onclick="location.reload()">REPETIR EXAMEN</button>
    </div>
</div>

<script>
    const verbosDB = [
        {inf:"be", pas:"was/were", par:"been", esp:"ser/estar"}, {inf:"beat", pas:"beat", par:"beat/beaten", esp:"golpear"}, {inf:"become", pas:"became", par:"become", esp:"llegar a ser"},
        {inf:"begin", pas:"began", par:"begun", esp:"empezar"}, {inf:"bend", pas:"bent", par:"bent", esp:"doblar"}, {inf:"bet", pas:"bet", par:"bet", esp:"apostar"},
        {inf:"bite", pas:"bit", par:"bitten", esp:"morder/picar"}, {inf:"bleed", pas:"bled", par:"bled", esp:"sangrar"}, {inf:"blow", pas:"blew", par:"blown", esp:"soplar"},
        {inf:"break", pas:"broke", par:"broken", esp:"romper"}, {inf:"bring", pas:"brought", par:"brought", esp:"traer"}, {inf:"build", pas:"built", par:"built", esp:"construir"},
        {inf:"burn", pas:"burned/burnt", par:"burned/burnt", esp:"quemar"}, {inf:"burst", pas:"burst", par:"burst", esp:"estallar"}, {inf:"buy", pas:"bought", par:"bought", esp:"comprar"},
        {inf:"catch", pas:"caught", par:"caught", esp:"coger"}, {inf:"choose", pas:"chose", par:"chosen", esp:"escoger"}, {inf:"come", pas:"came", par:"come", esp:"venir"},
        {inf:"cost", pas:"cost", par:"cost", esp:"costar"}, {inf:"cut", pas:"cut", par:"cut", esp:"cortar"}, {inf:"deal", pas:"dealt", par:"dealt", esp:"tratar"},
        {inf:"dig", pas:"dug", par:"dug", esp:"cavar"}, {inf:"do", pas:"did", par:"done", esp:"hacer"}, {inf:"draw", pas:"drew", par:"drawn", esp:"dibujar"},
        {inf:"dream", pas:"dreamed/dreamt", par:"dreamed/dreamt", esp:"soñar"}, {inf:"drink", pas:"drank", par:"drunk", esp:"beber"}, {inf:"drive", pas:"drove", par:"driven", esp:"conducir"},
        {inf:"eat", pas:"ate", par:"eaten", esp:"comer"}, {inf:"fall", pas:"fell", par:"fallen", esp:"caer"}, {inf:"feed", pas:"fed", par:"fed", esp:"alimentar"},
        {inf:"feel", pas:"felt", par:"felt", esp:"sentir"}, {inf:"fight", pas:"fought", par:"fought", esp:"pelear"}, {inf:"find", pas:"found", par:"found", esp:"encontrar"},
        {inf:"fly", pas:"flew", par:"flown", esp:"volar"}, {inf:"forget", pas:"forgot", par:"forgotten", esp:"olvidar"}, {inf:"forgive", pas:"forgave", par:"forgiven", esp:"perdonar"},
        {inf:"freeze", pas:"froze", par:"frozen", esp:"congelar"}, {inf:"get", pas:"got", par:"got/gotten", esp:"conseguir"}, {inf:"give", pas:"gave", par:"given", esp:"dar"},
        {inf:"go", pas:"went", par:"gone", esp:"ir"}, {inf:"grow", pas:"grew", par:"grown", esp:"crecer"}, {inf:"have", pas:"had", par:"had", esp:"tener"},
        {inf:"hear", pas:"heard", par:"heard", esp:"oír"}, {inf:"hide", pas:"hid", par:"hidden", esp:"esconder"}, {inf:"hit", pas:"hit", par:"hit", esp:"golpear"},
        {inf:"hold", pas:"held", par:"held", esp:"sujetar"}, {inf:"hurt", pas:"hurt", par:"hurt", esp:"herir"}, {inf:"keep", pas:"kept", par:"kept", esp:"mantener"},
        {inf:"know", pas:"knew", par:"known", esp:"saber"}, {inf:"learn", pas:"learned/learnt", par:"learned/learnt", esp:"aprender"}, {inf:"leave", pas:"left", par:"left", esp:"dejar"},
        {inf:"lend", pas:"lent", par:"lent", esp:"prestar"}, {inf:"let", pas:"let", par:"let", esp:"permitir"}, {inf:"lie", pas:"lay", par:"lain", esp:"tumbarse"},
        {inf:"light", pas:"lit", par:"lit", esp:"encender"}, {inf:"lose", pas:"lost", par:"lost", esp:"perder"}, {inf:"make", pas:"made", par:"made", esp:"hacer"},
        {inf:"mean", pas:"meant", par:"meant", esp:"significar"}, {inf:"meet", pas:"met", par:"met", esp:"conocer"}, {inf:"pay", pas:"paid", par:"paid", esp:"pagar"},
        {inf:"put", pas:"put", par:"put", esp:"poner"}, {inf:"read", pas:"read", par:"read", esp:"leer"}, {inf:"ride", pas:"rode", par:"ridden", esp:"montar"},
        {inf:"ring", pas:"rang", par:"rung", esp:"sonar"}, {inf:"rise", pas:"rose", par:"risen", esp:"subir"}, {inf:"run", pas:"ran", par:"run", esp:"correr"},
        {inf:"say", pas:"said", par:"said", esp:"decir"}, {inf:"see", pas:"saw", par:"seen", esp:"ver"}, {inf:"sell", pas:"sold", par:"sold", esp:"vender"},
        {inf:"send", pas:"sent", par:"sent", esp:"enviar"}, {inf:"set", pas:"set", par:"set", esp:"poner"}, {inf:"shake", pas:"shook", par:"shaken", esp:"sacudir"},
        {inf:"shine", pas:"shone", par:"shone", esp:"brillar"}, {inf:"shoot", pas:"shot", par:"shot", esp:"disparar"}, {inf:"show", pas:"showed", par:"shown", esp:"mostrar"},
        {inf:"shut", pas:"shut", par:"shut", esp:"cerrar"}, {inf:"sing", pas:"sang", par:"sung", esp:"cantar"}, {inf:"sink", pas:"sank", par:"sunk", esp:"hundirse"},
        {inf:"sit", pas:"sat", par:"sat", esp:"sentarse"}, {inf:"sleep", pas:"slept", par:"slept", esp:"dormir"}, {inf:"speak", pas:"spoke", par:"spoken", esp:"hablar"},
        {inf:"spend", pas:"spent", par:"spent", esp:"gastar"}, {inf:"stand", pas:"stood", par:"stood", esp:"estar de pie"}, {inf:"steal", pas:"stole", par:"stolen", esp:"robar"},
        {inf:"stick", pas:"stuck", par:"stuck", esp:"pegar"}, {inf:"swim", pas:"swam", par:"swum", esp:"nadar"}, {inf:"take", pas:"took", par:"taken", esp:"coger"},
        {inf:"teach", pas:"taught", par:"taught", esp:"enseñar"}, {inf:"tell", pas:"told", par:"told", esp:"decir"}, {inf:"think", pas:"thought", par:"thought", esp:"pensar"},
        {inf:"throw", pas:"threw", par:"thrown", esp:"lanzar"}, {inf:"understand", pas:"understood", par:"understood", esp:"entender"}, {inf:"wake", pas:"woke", par:"woken", esp:"despertar"},
        {inf:"wear", pas:"wore", par:"worn", esp:"llevar puesto"}, {inf:"win", pas:"won", par:"won", esp:"ganar"}, {inf:"write", pas:"wrote", par:"written", esp:"escribir"}
    ];

    let listaExamen = [];
    let indiceActual = 0;
    let aciertos = 0;
    let enModoFeedback = false;

    function iniciarExamen() {
        listaExamen = [...verbosDB].sort(() => 0.5 - Math.random()).slice(0, 20);
        indiceActual = 0;
        aciertos = 0;
        document.getElementById('startScreen').classList.add('hidden');
        document.getElementById('quizScreen').classList.remove('hidden');
        mostrarPregunta();
    }

    function mostrarPregunta() {
        enModoFeedback = false;
        const v = listaExamen[indiceActual];
        const area = document.getElementById('questionArea');
        const feedback = document.getElementById('feedbackArea');
        const btn = document.getElementById('actionBtn');
        
        feedback.style.display = "none";
        btn.innerText = "COMPROBAR";
        document.getElementById('currentNum').innerText = indiceActual + 1;
        
        let tipo = indiceActual % 3;
        let html = `<h2>Verbo: "${v.inf.toUpperCase()}"</h2>`;

        if (tipo === 0) {
            html += `<p>Selecciona el <b>Past Participle</b>:</p>
                    <div class="options">
                        <label><input type="radio" name="op" value="${v.pas}"> ${v.pas}</label>
                        <label><input type="radio" name="op" value="${v.par}"> ${v.par}</label>
                        <label><input type="radio" name="op" value="${v.inf}ing"> ${v.inf}ing</label>
                    </div>`;
        } else if (tipo === 1) {
            html += `<p>Escribe el <b>Past Simple</b>:</p>
                    <input type="text" id="userInput" autocomplete="off" placeholder="Escribe aquí...">`;
        } else {
            html += `<p>¿Cuál es su significado en <b>Español</b>?</p>
                    <input type="text" id="userInput" autocomplete="off" placeholder="Traducción...">`;
        }

        area.innerHTML = html;
    }

    function validarRespuesta() {
        if (enModoFeedback) {
            siguientePregunta();
            return;
        }

        const v = listaExamen[indiceActual];
        let tipo = indiceActual % 3;
        let esCorrecto = false;
        let respuestaCorrecta = "";

        if (tipo === 0) {
            const sel = document.querySelector('input[name="op"]:checked');
            if (!sel) return alert("Por favor, selecciona una opción");
            respuestaCorrecta = v.par;
            if (sel.value === v.par) esCorrecto = true;
        } else if (tipo === 1) {
            const input = document.getElementById('userInput').value.trim().toLowerCase();
            if (!input) return alert("Escribe algo antes de continuar");
            respuestaCorrecta = v.pas.toLowerCase();
            if (respuestaCorrecta.split('/').includes(input)) esCorrecto = true;
        } else {
            const input = document.getElementById('userInput').value.trim().toLowerCase();
            if (!input) return alert("Escribe el significado");
            respuestaCorrecta = v.esp.toLowerCase();
            if (respuestaCorrecta.includes(input)) esCorrecto = true;
        }

        mostrarFeedback(esCorrecto, respuestaCorrecta);
    }

    function mostrarFeedback(correcto, correcta) {
        const fb = document.getElementById('feedbackArea');
        const btn = document.getElementById('actionBtn');
        enModoFeedback = true;

        if (correcto) {
            aciertos++;
            fb.innerText = "¡Correcto! +1 punto";
            fb.className = "fb-correct";
            document.getElementById('liveScore').innerText = aciertos;
        } else {
            fb.innerText = "Incorrecto. Era: " + correcta;
            fb.className = "fb-incorrect";
        }

        fb.style.display = "block";
        btn.innerText = "SIGUIENTE PREGUNTA";
    }

    function siguientePregunta() {
        indiceActual++;
        if (indiceActual < 20) {
            mostrarPregunta();
        } else {
            finalizar();
        }
    }

    function finalizar() {
        document.getElementById('quizScreen').classList.add('hidden');
        document.getElementById('resultScreen').classList.remove('hidden');
        
        const nota = (aciertos / 20) * 10;
        document.getElementById('finalNote').innerText = nota.toFixed(1);
        document.getElementById('finalDetails').innerText = `Has acertado ${aciertos} de 20 verbos.`;
        
        const noteColor = nota >= 5 ? 'var(--success)' : 'var(--error)';
        document.getElementById('finalNote').style.color = noteColor;
    }
</script>

</body>
</html>