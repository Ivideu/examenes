<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Master Pro - Units 1-7</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #4a69bd; --success: #78e08f; --error: #eb2f06; --warning: #fa983a; --bg: #f1f2f6; }
        body { font-family: 'Fredoka', sans-serif; background: var(--bg); display: flex; justify-content: center; padding: 20px; }
        .quiz-container { background: white; width: 100%; max-width: 800px; padding: 30px; border-radius: 25px; box-shadow: 0 15px 40px rgba(0,0,0,0.1); border: 4px solid var(--primary); }
        .stats-bar { display: flex; justify-content: space-between; font-weight: 600; color: var(--primary); margin-bottom: 10px; }
        .progress-bg { height: 15px; background: #dfe4ea; border-radius: 10px; margin-bottom: 25px; }
        #progress-fill { height: 100%; background: var(--primary); width: 0%; border-radius: 10px; transition: 0.4s; }
        .badge { background: var(--warning); color: white; padding: 4px 12px; border-radius: 20px; font-size: 0.8rem; text-transform: uppercase; }
        .question-text { font-size: 1.5rem; margin: 20px 0; color: #2f3542; font-weight: 600; }
        input { width: 100%; padding: 15px; border: 3px solid #ced4da; border-radius: 15px; font-size: 1.1rem; margin-bottom: 10px; box-sizing: border-box; }
        input:focus { border-color: var(--primary); outline: none; }
        .btn-main { background: var(--primary); color: white; border: none; padding: 18px; width: 100%; border-radius: 15px; font-size: 1.2rem; font-weight: 600; cursor: pointer; transition: 0.2s; }
        .btn-main:hover { filter: brightness(1.1); transform: scale(1.01); }
        .options-container { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .option-card { padding: 15px; border: 2px solid #ced4da; border-radius: 15px; cursor: pointer; font-weight: 600; text-align: center; transition: 0.2s; }
        .option-card:hover { border-color: var(--primary); background: #f8f9fa; }
        .feedback { margin-top: 20px; padding: 15px; border-radius: 15px; display: none; font-weight: 600; text-align: center; }
        .correct { background: var(--success); color: #1e3799; }
        .incorrect { background: var(--error); color: white; }
    </style>
</head>
<body>

<div class="quiz-container">
    <div class="stats-bar">
        <span id="score-text">Aciertos: 0</span>
        <span id="streak-text">Racha: üî• 0</span>
    </div>
    <div class="progress-bg"><div id="progress-fill"></div></div>
    
    <div id="quiz-body">
        </div>

    <div id="feedback-area" class="feedback"></div>
</div>

<script>
// Base de datos extendida de los documentos
const verbsDB = [
    { inf: "be", pas: "was/were", part: "been", esp: "ser/estar" },
    { inf: "begin", pas: "began", part: "begun", esp: "empezar" },
    { inf: "bite", pas: "bit", part: "bitten", esp: "morder" },
    { inf: "break", pas: "broke", part: "broken", esp: "romper" },
    { inf: "bring", pas: "brought", part: "brought", esp: "traer" },
    { inf: "build", pas: "built", part: "built", esp: "construir" },
    { inf: "buy", pas: "bought", part: "bought", esp: "comprar" },
    { inf: "choose", pas: "chose", part: "chosen", esp: "escoger" },
    { inf: "come", pas: "came", part: "come", esp: "venir" },
    { inf: "do", pas: "did", part: "done", esp: "hacer" },
    { inf: "drive", pas: "drove", part: "driven", esp: "conducir" },
    { inf: "eat", pas: "ate", part: "eaten", esp: "comer" },
    { inf: "fly", pas: "flew", part: "flown", esp: "volar" },
    { inf: "give", pas: "gave", part: "given", esp: "dar" },
    { inf: "go", pas: "went", part: "gone", esp: "ir" },
    { inf: "know", pas: "knew", part: "known", esp: "saber" },
    { inf: "see", pas: "saw", part: "seen", esp: "ver" },
    { inf: "write", pas: "wrote", part: "written", esp: "escribir" }
];

const vocabDB = [
    { en: "bean", es: "jud√≠a", unit: "Unit 1" },
    { en: "sausage", es: "salchicha", unit: "Unit 1" },
    { en: "dangerous", es: "peligroso", unit: "Unit 1" },
    { en: "shark", es: "tibur√≥n", unit: "Unit 2" },
    { en: "neighbourhood", es: "urbanizaci√≥n", unit: "Unit 4" },
    { en: "musician", es: "m√∫sico", unit: "Unit 4" },
    { en: "petrol station", es: "gasolinera" , unit: "Unit 4"},
    { en: "conquer", es: "conquistar", unit: "Unit 5" },
    { en: "jewellery", es: "joyas", unit: "Unit 5" },
    { en: "carpet", es: "alfombra", unit: "Unit 6" },
    { en: "cupboard", es: "armario", unit: "Unit 6" },
    { en: "waterfall", es: "cascada", unit: "Unit 7" },
    { en: "swimsuit", es: "ba√±ador", unit: "Unit 7" },
    { en: "boring", es: "aburrido", unit: "Unit 7" }
];

let score = 0;
let streak = 0;
let currentQ = 0;
const totalQ = 20;

function loadQuestion() {
    if(currentQ >= totalQ) return finish();
    
    currentQ++;
    document.getElementById('progress-fill').style.width = (currentQ/totalQ)*100 + "%";
    document.getElementById('feedback-area').style.display = 'none';
    
    const type = Math.floor(Math.random() * 4);
    const body = document.getElementById('quiz-body');

    if (type === 0) { // TRIPLE VERBO
        const v = verbsDB[Math.floor(Math.random()*verbsDB.length)];
        body.innerHTML = `
            <span class="badge">Verbos Irregulares</span>
            <div class="question-text">Completa las 3 formas de: "${v.esp}"</div>
            <input type="text" id="i1" placeholder="Infinitivo">
            <input type="text" id="i2" placeholder="Pasado Simple">
            <input type="text" id="i3" placeholder="Participio">
            <button class="btn-main" onclick="checkTriple('${v.inf}','${v.pas}','${v.part}')">Comprobar</button>
        `;
    } else if (type === 1) { // MULTIPLE CHOICE
        const item = vocabDB[Math.floor(Math.random()*vocabDB.length)];
        let opts = [item.es];
        while(opts.length < 4) {
            let r = vocabDB[Math.floor(Math.random()*vocabDB.length)].es;
            if(!opts.includes(r)) opts.push(r);
        }
        opts.sort(() => Math.random() - 0.5);

        body.innerHTML = `
            <span class="badge">${item.unit}</span>
            <div class="question-text">¬øQu√© significa "${item.en}"?</div>
            <div class="options-container">
                ${opts.map(o => `<div class="option-card" onclick="checkSimple('${o}','${item.es}')">${o}</div>`).join('')}
            </div>
        `;
    } else { // TRADUCCI√ìN LIBRE
        const item = vocabDB[Math.floor(Math.random()*vocabDB.length)];
        const toEng = Math.random() > 0.5;
        body.innerHTML = `
            <span class="badge">Traducci√≥n</span>
            <div class="question-text">Traduce: "${toEng ? item.es : item.en}"</div>
            <input type="text" id="free-ans" placeholder="Escribe en ${toEng ? 'ingl√©s' : 'espa√±ol'}...">
            <button class="btn-main" onclick="checkFree('${toEng ? item.en : item.es}')">Enviar</button>
        `;
    }
}

function giveFeedback(isCorrect, msg) {
    const f = document.getElementById('feedback-area');
    f.style.display = 'block';
    if(isCorrect) {
        score++; streak++;
        f.className = "feedback correct";
        f.innerText = "‚≠ê ¬°Perfecto! " + msg;
    } else {
        streak = 0;
        f.className = "feedback incorrect";
        f.innerText = "‚ùå Ups... " + msg;
    }
    document.getElementById('score-text').innerText = "Aciertos: " + score;
    document.getElementById('streak-text').innerText = "Racha: üî• " + streak;
    setTimeout(loadQuestion, 2500);
}

function checkTriple(c1, c2, c3) {
    const u1 = document.getElementById('i1').value.trim().toLowerCase();
    const u2 = document.getElementById('i2').value.trim().toLowerCase();
    const u3 = document.getElementById('i3').value.trim().toLowerCase();
    giveFeedback(u1===c1 && u2===c2 && u3===c3, `Correcto: ${c1} | ${c2} | ${c3}`);
}

function checkSimple(sel, corr) {
    giveFeedback(sel === corr, `La respuesta era: ${corr}`);
}

function checkFree(corr) {
    const ans = document.getElementById('free-ans').value.trim().toLowerCase();
    giveFeedback(ans === corr.toLowerCase(), `La respuesta correcta es: ${corr}`);
}

function finish() {
    document.getElementById('quiz-body').innerHTML = `
        <div style="text-align:center">
            <h2>üèÜ ¬°Examen Completado!</h2>
            <p style="font-size:1.4rem">Puntuaci√≥n: ${score} / ${totalQ}</p>
            <button class="btn-main" onclick="location.reload()">Reiniciar</button>
        </div>
    `;
}

loadQuestion();
</script>

</body>
</html>
