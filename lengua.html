<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RETO LING√ú√çSTICO AVANZADO - 1¬∫ ESO</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Nunito:wght@600;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #4a69bd;
            --secondary: #60a3bc;
            --accent: #f6b93b;
            --success: #78e08f;
            --error: #e55039;
            --bg-light: #f1f2f6;
            --card-white: #ffffff;
            --text-dark: #2f3542;
        }

        body {
            background-color: var(--bg-light);
            color: var(--text-dark);
            font-family: 'Nunito', sans-serif;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-image: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }

        #game-container {
            width: 95%;
            max-width: 850px;
            background: var(--card-white);
            border-radius: 20px;
            padding: 35px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            border-top: 8px solid var(--primary);
            margin: 20px 0;
        }

        h1 {
            font-family: 'Montserrat', sans-serif;
            text-align: center;
            color: var(--primary);
            font-size: 1.8rem;
            margin-top: 0;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .stats-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            font-weight: 800;
            color: var(--primary);
            font-size: 1.1rem;
        }

        .progress-container {
            height: 12px;
            background: #eee;
            border-radius: 10px;
            margin-bottom: 25px;
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }

        #progress-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, var(--secondary), var(--primary));
            transition: width 0.4s ease;
        }

        .question-text {
            font-size: 1.4rem;
            margin-bottom: 20px;
            font-weight: 800;
            color: #2f3542;
            line-height: 1.4;
        }

        .options-grid { display: grid; gap: 12px; }
        
        .btn {
            background: #fff; 
            border: 2px solid #ced6e0;
            padding: 16px; 
            border-radius: 12px; 
            cursor: pointer;
            font-size: 1.1rem; 
            font-weight: 700; 
            text-align: left;
            font-family: 'Nunito', sans-serif;
            transition: all 0.2s;
            color: var(--text-dark);
        }

        .btn:hover:not(:disabled) { 
            border-color: var(--secondary); 
            background: #f8fbff; 
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(96, 163, 188, 0.2);
        }
        
        .tf-grid { display: flex; gap: 15px; }
        .btn-tf { flex: 1; text-align: center; font-size: 1.2rem; }

        #feedback-area {
            display: none; margin-top: 25px; padding: 20px;
            border-radius: 12px; text-align: center; font-size: 1.1rem;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

        .correct-box { background: #f0fbf4; color: #2ecc71; border: 2px solid #2ecc71; }
        .wrong-box { background: #fdf2f0; color: #e74c3c; border: 2px solid #e74c3c; }

        .btn-next {
            margin-top: 15px; background: var(--primary); color: white;
            border: none; padding: 12px 30px; border-radius: 8px;
            cursor: pointer; font-family: 'Montserrat'; font-weight: bold;
            font-size: 1.1rem; text-transform: uppercase;
        }

        .btn-next:hover { background: #3c55a5; }

        #score-screen { text-align: center; display: none; }
        .final-score { font-size: 5rem; color: var(--primary); font-family: 'Montserrat'; font-weight: 800; margin: 10px 0; }
        .stat-box { display: flex; justify-content: space-around; margin: 30px 0; font-size: 1.3rem; font-weight: 800; background: #f1f2f6; padding: 20px; border-radius: 15px; }
    </style>
</head>
<body>

<div id="game-container">
    <div id="quiz-ui">
        <h1>RETO DE LENGUA - 1¬∫ ESO</h1>
        <div class="stats-bar">
            <span id="q-count">PREGUNTA: 1 / 20</span>
            <span id="score-count">PUNTOS: 0</span>
        </div>
        <div class="progress-container"><div id="progress-fill"></div></div>
        
        <div id="question-area"></div>
        
        <div id="feedback-area">
            <p id="feedback-text"></p>
            <button class="btn-next" onclick="nextQuestion()">Siguiente Pregunta ‚ûî</button>
        </div>
    </div>

    <div id="score-screen">
        <h1>¬°EXAMEN COMPLETADO!</h1>
        <div class="final-score" id="total-pts">0</div>
        <p style="font-size: 1.2rem; color: #747d8c;">Puntuaci√≥n sobre 10</p>
        <div class="stat-box">
            <div style="color: var(--success)">Aciertos: <br><span id="c-count" style="font-size: 2rem;">0</span></div>
            <div style="color: var(--error)">Errores: <br><span id="w-count" style="font-size: 2rem;">0</span></div>
        </div>
        <p id="rank-text" style="font-size: 1.3rem; font-weight: bold; margin-bottom: 30px;"></p>
        <button class="btn btn-next" style="width:100%;" onclick="location.reload()">üîÑ GENERAR NUEVO EXAMEN ALEATORIO</button>
    </div>
</div>

<script>
    // BANCO DE 50 PREGUNTAS (Incluye preguntas de razonamiento)
    const allQuestions = [
        // UNIDAD 1 & 2
        { type: 'choice', q: "En la comunicaci√≥n, ¬øc√≥mo se llama el medio f√≠sico por el que circula el mensaje?", opts: ["Emisor", "C√≥digo", "Canal", "Receptor"], ans: 2, info: "El canal es el medio f√≠sico (el aire, un papel, internet...) por el que viaja el mensaje." },
        { type: 'choice', q: "¬øQu√© situaci√≥n se da cuando conviven dos lenguas pero una tiene mayor prestigio social o uso institucional?", opts: ["Biling√ºismo", "Diglosia", "Dialecto", "Monoling√ºismo"], ans: 1, info: "La diglosia es el desequilibrio en el uso y prestigio entre dos lenguas que conviven." },
        { type: 'tf', q: "Un dialecto es un sistema ling√º√≠stico derivado de otro, sin una fuerte diferenciaci√≥n frente a los de su mismo origen.", ans: true, info: "Correcto: El dialecto es una variedad de una lengua en un territorio determinado." },
        { type: 'choice', q: "Las palabras formadas por la uni√≥n de dos o m√°s ra√≠ces (ej: sacapuntas) son palabras...", opts: ["Simples", "Derivadas", "Compuestas", "Parasint√©ticas"], ans: 2, info: "Las palabras compuestas unen dos o m√°s palabras simples (saca + puntas)." },
        { type: 'choice', q: "[RAZONAMIENTO] Sabiendo que los adverbios terminados en '-mente' conservan la tilde del adjetivo original, ¬øc√≥mo se escribe correctamente?", opts: ["Facilmente", "F√°cilmente", "Facilm√©nt√©", "F√†cilmente"], ans: 1, info: "F√°cil lleva tilde por ser llana terminada en 'l'. Al a√±adir '-mente', la conserva: F√°cilmente." },
        { type: 'choice', q: "[RAZONAMIENTO] Si est√°s leyendo las noticias en una p√°gina web, ¬øcu√°l es el canal?", opts: ["El periodista", "El idioma espa√±ol", "La pantalla del ordenador / Internet", "La noticia en s√≠"], ans: 2, info: "El canal es el soporte f√≠sico. Internet o la pantalla son el canal." },
        { type: 'tf', q: "La palabra 'Murci√©lago' tiene un triptongo.", ans: false, info: "Falso. Tiene un diptongo 'i√©'. Para que sea triptongo deben ser tres vocales en la misma s√≠laba (cerrada+abierta+cerrada)." },
        { type: 'choice', q: "[RAZONAMIENTO] Analiza la palabra 'Submarino'. Est√° formada por...", opts: ["Lexema + sufijo", "Prefijo + lexema + sufijo", "Dos lexemas", "Lexema sin morfemas"], ans: 1, info: "Sub (prefijo) + mar (lexema/ra√≠z) + ino (sufijo)." },
        
        // UNIDAD 3
        { type: 'choice', q: "¬øQu√© clase de palabra designa personas, animales, cosas, ideas o sentimientos?", opts: ["Adjetivo", "Verbo", "Sustantivo", "Adverbio"], ans: 2, info: "El sustantivo o nombre es la palabra que sirve para nombrar la realidad." },
        { type: 'tf', q: "La familia l√©xica est√° formada por todas las palabras que comparten la misma ra√≠z.", ans: true, info: "Correcto: Por ejemplo, flor, florero, florister√≠a, aflorar (ra√≠z: flor)." },
        { type: 'choice', q: "Un sustantivo abstracto es aquel que...", opts: ["Se puede percibir por los sentidos", "Nombra grupos de cosas en singular", "Nombra ideas o sentimientos", "Deriva de un verbo"], ans: 2, info: "Ejemplos de sustantivos abstractos: alegr√≠a, paz, justicia." },
        { type: 'choice', q: "[RAZONAMIENTO] Identifica el intruso en esta familia l√©xica: Panadero, Panader√≠a, Empanada, Pantal√≥n.", opts: ["Panadero", "Panader√≠a", "Empanada", "Pantal√≥n"], ans: 3, info: "Pantal√≥n no comparte la ra√≠z l√©xica 'pan-' relacionada con el alimento." },
        { type: 'choice', q: "[RAZONAMIENTO] Decimos 'el agua clara' y no 'la agua clara'. ¬øSignifica esto que 'agua' es un sustantivo masculino?", opts: ["S√≠, todos los sustantivos con 'el' son masculinos.", "No, es femenino. Usa 'el' para evitar cacofon√≠a (choque de la 'a' t√≥nica).", "Es neutro.", "Es masculino en singular y femenino en plural."], ans: 1, info: "Es femenino (por eso decimos clara y no claro). Usa 'el' porque empieza por 'a' t√≥nica." },
        { type: 'tf', q: "'Reba√±o' es un sustantivo colectivo porque est√° en plural.", ans: false, info: "Falso. Es colectivo porque, estando en SINGULAR, nombra a un conjunto de ovejas." },
        { type: 'choice', q: "Los sustantivos 'Madrid', 'Ebro' y 'Everest' son...", opts: ["Comunes", "Propios", "Abstractos", "Colectivos"], ans: 1, info: "Son sustantivos propios porque identifican a un ser o lugar concreto diferenci√°ndolo de los dem√°s." },

        // UNIDAD 4 & 5 (Verbos)
        { type: 'choice', q: "El verbo funciona siempre en la oraci√≥n como...", opts: ["Complemento directo", "N√∫cleo del sujeto", "N√∫cleo del predicado", "Atributo"], ans: 2, info: "El verbo expresa acciones, estados o situaciones y es siempre el N√öCLEO del predicado." },
        { type: 'choice', q: "Los verbos se componen de...", opts: ["Ra√≠z y prefijos", "Ra√≠z y afijos flexivos", "Lexema y morfema derivativo", "Prefijos y sufijos"], ans: 1, info: "La ra√≠z no cambia y los afijos flexivos aportan informaci√≥n de persona, n√∫mero, tiempo, modo y aspecto." },
        { type: 'choice', q: "¬øQu√© modo verbal expresa un hecho real (ej: 'Nosotros visitaremos el museo')?", opts: ["Indicativo", "Subjuntivo", "Imperativo", "Gerundio"], ans: 0, info: "El Indicativo expresa hechos reales. El Subjuntivo dudas o deseos, y el Imperativo √≥rdenes." },
        { type: 'choice', q: "Si la acci√≥n del verbo est√° terminada (ej: 'Marta estudi√≥ tres d√≠as'), decimos que tiene aspecto...", opts: ["Imperfecto", "Perfecto", "Simple", "Compuesto"], ans: 1, info: "El aspecto Perfecto indica que la acci√≥n ya ha concluido." },
        { type: 'choice', q: "Las formas NO personales del verbo son...", opts: ["Presente, pasado y futuro", "Indicativo, subjuntivo e imperativo", "Infinitivo, gerundio y participio", "Primera, segunda y tercera conjugaci√≥n"], ans: 2, info: "No expresan persona, ni modo, ni tiempo. Ej: cantar, cantando, cantado." },
        { type: 'choice', q: "En la conjugaci√≥n verbal, los tiempos compuestos se forman con...", opts: ["El participio del verbo principal", "Verbo auxiliar haber + participio", "Verbo ser + participio", "Ra√≠z + afijo"], ans: 1, info: "Ejemplo: 'Hab√≠a desaparecido' (Haber + participio del verbo desaparecer)." },
        { type: 'choice', q: "[RAZONAMIENTO] Deduce el tiempo y modo de 'Hubi√©ramos cantado'.", opts: ["Condicional compuesto de Indicativo", "Pret√©rito pluscuamperfecto de Subjuntivo", "Futuro compuesto de Subjuntivo", "Pret√©rito perfecto de Indicativo"], ans: 1, info: "Es Subjuntivo ('Ojal√° hubi√©ramos cantado') y compuesto (pasado anterior a otro pasado)." },
        { type: 'choice', q: "[RAZONAMIENTO] Transforma a voz pasiva: 'El perro mordi√≥ la pelota'.", opts: ["La pelota muerde al perro.", "La pelota fue mordida por el perro.", "El perro hab√≠a mordido la pelota.", "La pelota es mordida por el perro."], ans: 1, info: "El CD ('la pelota') pasa a Sujeto Paciente y el verbo se pone en voz pasiva (fue mordida) en el mismo tiempo (pasado)." },
        { type: 'choice', q: "[RAZONAMIENTO] Un verbo defectivo es aquel que...", opts: ["Tiene faltas de ortograf√≠a", "No se puede conjugar en todos sus tiempos o personas", "Solo se usa en plural", "No tiene infinitivo"], ans: 1, info: "Ejemplo: 'Llover' es defectivo porque normalmente solo se conjuga en 3¬™ persona del singular (llueve), no decimos 'yo lluevo'." },
        { type: 'tf', q: "El participio es la √∫nica forma no personal que s√≠ puede indicar g√©nero y n√∫mero (ej: cantado, cantada, cantados).", ans: true, info: "Correcto. El infinitivo y el gerundio son invariables, pero el participio puede flexionar." },
        { type: 'choice', q: "Identifica el Pret√©rito Anterior del verbo Cantar:", opts: ["Hube cantado", "Hab√≠a cantado", "Habr√© cantado", "Habr√≠a cantado"], ans: 0, info: "El Pret√©rito Anterior se forma con el pret√©rito perfecto simple de haber (hube, hubiste, hubo...) + participio." },
        { type: 'choice', q: "¬øQu√© tiempo verbal es 'Cantar√©is'?", opts: ["Condicional simple", "Futuro compuesto", "Futuro simple", "Presente de subjuntivo"], ans: 2, info: "Es Futuro simple de Indicativo (2¬™ persona del plural)." },

        // UNIDAD 6 (Adjetivos)
        { type: 'choice', q: "El adjetivo calificativo siempre concuerda con el sustantivo al que acompa√±a en...", opts: ["Persona y n√∫mero", "G√©nero y tiempo", "G√©nero y n√∫mero", "Modo y aspecto"], ans: 2, info: "Ejemplo: Gato blanco (masculino, singular) / Gatas blancas (femenino, plural)." },
        { type: 'choice', q: "¬øEn qu√© grado est√° el adjetivo en la frase 'Es el m√°s r√°pido del equipo'?", opts: ["Positivo", "Comparativo de superioridad", "Superlativo relativo", "Superlativo absoluto"], ans: 2, info: "El superlativo relativo destaca una cualidad en su grado m√°ximo pero dentro de un grupo ('del equipo')." },
        { type: 'choice', q: "El grado comparativo de igualdad se forma con la estructura...", opts: ["M√°s ... que", "Menos ... que", "Tan ... como", "Muy ..."], ans: 2, info: "Ejemplo: 'Juan es tan alto como Mar√≠a'." },
        { type: 'choice', q: "[RAZONAMIENTO] ¬øCu√°l es el superlativo culto e irregular de 'Pobre'?", opts: ["Pobr√≠simo", "Paup√©rrimo", "Muy pobre", "El m√°s pobre"], ans: 1, info: "Algunos adjetivos conservan su ra√≠z latina para el superlativo absoluto: pobre -> paup√©rrimo; libre -> lib√©rrimo." },
        { type: 'choice', q: "[RAZONAMIENTO] Compara el significado: 'Un hombre pobre' y 'Un pobre hombre'.", opts: ["Significan exactamente lo mismo.", "El primero no tiene dinero, el segundo da l√°stima.", "El primero da l√°stima, el segundo no tiene dinero.", "El adjetivo est√° mal colocado en la segunda."], ans: 1, info: "La posici√≥n del adjetivo calificativo puede cambiar completamente su significado." },

        // UNIDAD 7 (Determinantes y Pronombres)
        { type: 'choice', q: "¬øCu√°l es la principal funci√≥n del Determinante?", opts: ["Sustituir al sustantivo", "Acompa√±ar al sustantivo y concretar su significado", "Indicar una acci√≥n", "Unir oraciones"], ans: 1, info: "El determinante acompa√±a al sustantivo. Ej: 'Esta botella'." },
        { type: 'choice', q: "Los determinantes demostrativos que indican 'lejan√≠a' son:", opts: ["este, esta, estos, estas", "ese, esa, esos, esas", "aquel, aquella, aquellos, aquellas", "m√≠o, tuyo, suyo"], ans: 2, info: "Aquel, aquella, aquellos y aquellas especifican una distancia de lejan√≠a." },
        { type: 'choice', q: "¬øQu√© clase de palabra sustituye y representa por lo general a un sustantivo sin nombrarlo?", opts: ["El Adjetivo", "El Pronombre", "El Determinante", "La Preposici√≥n"], ans: 1, info: "El Pronombre cumple en la oraci√≥n las mismas funciones que el sustantivo al que sustituye." },
        { type: 'choice', q: "[RAZONAMIENTO] En 'La profesora es buena. √âSTA es la mejor', la palabra '√âSTA' funciona como...", opts: ["Determinante demostrativo", "Pronombre demostrativo", "Adjetivo calificativo", "Pronombre personal"], ans: 1, info: "Es un pronombre porque no acompa√±a a ning√∫n sustantivo, sino que lo sustituye (a la profesora)." },
        { type: 'choice', q: "Los pronombres personales 'yo, t√∫, √©l, nosotros...' son formas...", opts: ["√Åtonas", "T√≥nicas", "Demostrativas", "Relativas"], ans: 1, info: "Son pronombres personales t√≥nicos. Me, te, se, nos, os... son √°tonos." },
        { type: 'tf', q: "La sinonimia se produce cuando dos palabras tienen significados opuestos o contrarios.", ans: false, info: "Falso. La sinonimia es cuando tienen significados iguales o parecidos. Los opuestos son los Ant√≥nimos." },
        { type: 'choice', q: "[RAZONAMIENTO] Lee esta oraci√≥n: 'Mi perro me trajo la pelota a m√≠'. Identifica las palabras subrayadas (Mi / me / m√≠).", opts: ["Todos son pronombres.", "Todos son determinantes.", "Det. posesivo / Pron. √°tono / Pron. t√≥nico.", "Pron. t√≥nico / Det. posesivo / Pron. √°tono."], ans: 2, info: "Mi (Det. acompa√±a a perro). Me (Pron. personal √°tono). M√≠ (Pron. personal t√≥nico tras preposici√≥n)." },
        { type: 'choice', q: "¬øCu√°les son las formas de cortes√≠a de los pronombres personales de segunda persona?", opts: ["T√∫ / Vosotros", "√âl / Ella", "Usted / Ustedes", "M√≠ / Ti"], ans: 2, info: "Usted y Ustedes, aunque gramaticalmente usan verbos en 3¬™ persona, son pronombres de 2¬™ persona de cortes√≠a." },
        { type: 'choice', q: "El pronombre relativo 'cuyo, cuya' indica...", opts: ["Lugar", "Tiempo", "Posesi√≥n", "Pregunta"], ans: 2, info: "Ejemplo: 'La chica cuyo nombre es Alejandra...'. Equivale a 'el nombre de la cual'." },
        { type: 'choice', q: "[RAZONAMIENTO] En la oraci√≥n 'Tengo muchos', la palabra 'muchos' es...", opts: ["Determinante indefinido", "Pronombre indefinido", "Adjetivo calificativo", "Adverbio de cantidad"], ans: 1, info: "Es pronombre porque va solo, no acompa√±a a un sustantivo (si dijera 'Tengo muchos cromos', ser√≠a determinante)." },

        // UNIDAD 8 (Invariables, Sem√°ntica y Textos)
        { type: 'choice', q: "¬øCu√°les son las palabras invariables (no tienen g√©nero ni n√∫mero)?", opts: ["Sustantivos y adjetivos", "Verbos y pronombres", "Adverbios, preposiciones y conjunciones", "Determinantes y sustantivos"], ans: 2, info: "Los adverbios, preposiciones, conjunciones e interjecciones nunca cambian de forma." },
        { type: 'choice', q: "El significado objetivo, universal y de diccionario de una palabra se llama...", opts: ["Connotaci√≥n", "Denotaci√≥n", "Polisemia", "Sinonimia"], ans: 1, info: "La denotaci√≥n es el significado real y objetivo. La connotaci√≥n son los valores subjetivos que le damos." },
        { type: 'tf', q: "La noticia period√≠stica es un texto literario que busca transmitir emociones personales del autor.", ans: false, info: "Falso: La noticia es un texto period√≠stico informativo que busca la objetividad, no la ficci√≥n literaria." },
        { type: 'choice', q: "[RAZONAMIENTO] ¬øCu√°l es el significado CONNOTATIVO de 'zorro' en la frase: 'Ese vendedor es un zorro'?", opts: ["Mam√≠fero carn√≠voro de la familia de los c√°nidos.", "Persona astuta y enga√±osa.", "Persona muy r√°pida.", "Animal que vive en el bosque."], ans: 1, info: "La connotaci√≥n es el significado secundario o figurado que se le asocia culturalmente (astucia)." },
        { type: 'choice', q: "¬øQu√© clase de palabra es 'ayer'?", opts: ["Preposici√≥n", "Conjunci√≥n", "Adverbio de tiempo", "Sustantivo"], ans: 2, info: "Los adverbios expresan circunstancias de tiempo, modo, lugar, cantidad..." },
        { type: 'tf', q: "Las preposiciones forman una lista cerrada (a, ante, bajo, cabe, con...)", ans: true, info: "Correcto. Son elementos de enlace fijos e invariables." },
        { type: 'choice', q: "[RAZONAMIENTO] Identifica la conjunci√≥n en: 'Estudi√© mucho, pero no aprob√©'.", opts: ["Estudi√©", "Mucho", "Pero", "No"], ans: 2, info: "'Pero' es una conjunci√≥n adversativa que une dos proposiciones contraponiendo sus ideas." },
        { type: 'choice', q: "Las palabras '¬°Ay!', '¬°Hola!' o '¬°Uf!' se clasifican como...", opts: ["Adverbios", "Conjunciones", "Interjecciones", "Verbos"], ans: 2, info: "Las interjecciones expresan sentimientos o impresiones repentinas y equivalen a una oraci√≥n entera." },
        
        // MIX EXTRAS (Refuerzo de verbos y sintaxis b√°sica)
        { type: 'choice', q: "[RAZONAMIENTO] ¬øEn qu√© se diferencia el Pret√©rito Imperfecto (cantaba) del Pret√©rito Perfecto Simple (cant√©)?", opts: ["El imperfecto es presente y el perfecto es pasado.", "El imperfecto indica una acci√≥n no terminada en el pasado, y el perfecto una acci√≥n ya finalizada.", "No hay ninguna diferencia.", "El imperfecto es subjuntivo y el perfecto indicativo."], ans: 1, info: "Es la diferencia de aspecto: 'Ayer le√≠a' (imperfecto, no sabemos si termin√≥) vs 'Ayer le√≠' (perfecto, acci√≥n acabada)." },
        { type: 'choice', q: "¬øQu√© tiempo verbal es 'Hubiere cantado'?", opts: ["Condicional", "Futuro Compuesto de Subjuntivo", "Pret√©rito imperfecto", "Presente"], ans: 1, info: "Es el Futuro Compuesto del Modo Subjuntivo." }
    ];

    // CONFIGURACI√ìN DEL EXAMEN
    const QUESTIONS_PER_GAME = 20; // Puedes cambiar esto a 25 o 30 si quieres ex√°menes m√°s largos
    let selectedQuestions = [];
    let currentQ = 0;
    let score = 0;
    let correctCount = 0;
    let wrongCount = 0;

    function initGame() {
        // Algoritmo para mezclar el array completo de 50 preguntas
        let shuffled = [...allQuestions];
        for (let i = shuffled.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
        }
        // Seleccionamos solo el n√∫mero de preguntas indicado
        selectedQuestions = shuffled.slice(0, QUESTIONS_PER_GAME);
        renderQuestion();
    }

    function renderQuestion() {
        const qData = selectedQuestions[currentQ];
        const area = document.getElementById('question-area');
        const feedback = document.getElementById('feedback-area');
        
        feedback.style.display = 'none';
        document.getElementById('q-count').innerText = `PREGUNTA: ${currentQ + 1} / ${QUESTIONS_PER_GAME}`;
        document.getElementById('progress-fill').style.width = `${(currentQ / QUESTIONS_PER_GAME) * 100}%`;
        area.innerHTML = '';

        if (qData.type === 'choice') {
            area.innerHTML = `<div class="question-text">${qData.q}</div><div class="options-grid" id="opts"></div>`;
            qData.opts.forEach((o, i) => {
                const b = document.createElement('button');
                b.className = 'btn';
                b.innerHTML = o;
                b.onclick = () => checkAnswer(i === qData.ans, b);
                area.querySelector('#opts').appendChild(b);
            });
        } else if (qData.type === 'tf') {
            area.innerHTML = `<div class="question-text">${qData.q}</div><div class="tf-grid">
                <button class="btn btn-tf" onclick="checkAnswer(true === ${qData.ans}, this)">VERDADERO</button>
                <button class="btn btn-tf" onclick="checkAnswer(false === ${qData.ans}, this)">FALSO</button>
            </div>`;
        }
    }

    function checkAnswer(isCorrect, clickedBtn) {
        const qData = selectedQuestions[currentQ];
        const fArea = document.getElementById('feedback-area');
        const fText = document.getElementById('feedback-text');
        
        const btns = document.querySelectorAll('.btn');
        btns.forEach(b => {
            b.disabled = true;
            b.style.cursor = 'not-allowed';
            b.style.opacity = '0.6';
        });

        if (isCorrect) {
            clickedBtn.style.background = '#f0fbf4';
            clickedBtn.style.borderColor = '#2ecc71';
            
            score += (10 / QUESTIONS_PER_GAME); 
            correctCount++;
            fArea.className = 'correct-box';
            fText.innerHTML = `<b>¬°CORRECTO! üéØ</b><br><br>${qData.info}`;
        } else {
            clickedBtn.style.background = '#fdf2f0';
            clickedBtn.style.borderColor = '#e74c3c';
            
            wrongCount++;
            fArea.className = 'wrong-box';
            fText.innerHTML = `<b>INCORRECTO ‚ùå</b><br><br>${qData.info}`;
        }
        
        fArea.style.display = 'block';
        document.getElementById('score-count').innerText = `PUNTOS: ${score.toFixed(1)}`;
    }

    function nextQuestion() {
        currentQ++;
        if (currentQ < QUESTIONS_PER_GAME) {
            renderQuestion();
        } else {
            showFinal();
        }
    }

    function showFinal() {
        document.getElementById('quiz-ui').style.display = 'none';
        document.getElementById('score-screen').style.display = 'block';
        
        let finalMark = score.toFixed(1);
        if(finalMark > 10) finalMark = 10; 

        document.getElementById('total-pts').innerText = finalMark;
        document.getElementById('c-count').innerText = correctCount;
        document.getElementById('w-count').innerText = wrongCount;
        
        let rankText = document.getElementById('rank-text');
        if (finalMark >= 9) {
            rankText.innerText = "¬°SOBRESALIENTE! Tienes un razonamiento ling√º√≠stico espectacular.";
            rankText.style.color = "var(--success)";
        } else if (finalMark >= 5) {
            rankText.innerText = "¬°APROBADO! Vas por buen camino, aunque hay conceptos que reforzar.";
            rankText.style.color = "var(--accent)";
        } else {
            rankText.innerText = "INSUFICIENTE. ¬°Toca repasar a fondo la teor√≠a y volver a intentarlo!";
            rankText.style.color = "var(--error)";
        }
    }

    initGame();
</script>

</body>
</html>
